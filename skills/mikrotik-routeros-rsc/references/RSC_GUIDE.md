# .rsc Files – Export, Import, and Validation

Based on RouterOS manual (Scripting, Jan 2026):
https://help.mikrotik.com/docs/spaces/ROS/pages/47579229/Scripting

## Export
- `export [file=<name>]` at any menu exports config of current level and submenus.
- Without `file`, prints to console; with `file`, writes `.rsc` to `/files`.
- Use `print as-value` to get arrays and build dynamic scripts.

## Import (root)
- `import <file.rsc>` imports commands generated by `export` or written manually.
- RouterOS ≥ 7.16.x:
  - Error capture: `do { import test.rsc } on-error={ :put "Failure" }`.
  - Detailed message: `onerror e in={ import test.rsc } do={ :put "Failure - $e" }`.
  - `verbose=yes dry-run` finds multiple errors without altering configuration:
    - `import test.rsc verbose=yes dry-run`.
- In production, always run first in a test environment and with `dry-run`.

## Authoring guidelines
- Scripts must be idempotent: before `add`/`set`, verify existence with `find where ...`.
- Avoid hardcoding `numbers` (internal IDs); prefer `find` by keys/name.
- Organize by menus, avoid mixing `:` global and `/path` unnecessarily.
- Comment briefly critical lines; avoid extensive comments.
- Use `:onerror` and `:jobname` when applicable.

## Common risks to avoid
- Destructive commands: `system reset-configuration`, formatting, mass deletion.
- Excessive policies in `/system script add policy=...`.
- `import` inside scripts (use at root terminal, not inside `source`).
- `set`/`remove` with fixed IDs; use `find`.
- Loops with `:delay` without limits; use `:retry` with appropriate `max` and `delay`.

## Recommended patterns
- Firewall: create rules only if they don't exist (filter by `chain`, `action`, `comment`).
- IP addresses: add only if `address`/`interface` doesn't exist.
- Scheduler/Scripts: set minimum necessary `policy`; test permissions (`use-script-permissions`).
- DHCP, Routes, Bridges: always validate before modifying.
